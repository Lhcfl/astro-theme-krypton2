<div
  class="float-buttons fixed bottom-4 right-4 flex flex-col gap-2 print:hidden! text-base-content"
  aria-hidden="true"
>
  <div
    class="opacity-0 translate-x-20 transition [body.is-scrolled_&]:(opacity-100 translate-x-0)"
  >
    <button
      onclick="window.scrollTo({ top: 0, behavior: 'smooth' })"
      class="rounded-full p-4 text-lg md:text-xl bg-surface border-base-300 border"
      aria-label="Scroll to top"
    >
      <div class="i-mingcute:arrow-up-line"></div>
    </button>
  </div>
  <div class="hidden has-sidebar:block md:hidden!">
    <button
      onclick="document.body.classList.add('show-toc')"
      class="rounded-full p-4 text-lg md:text-xl bg-surface border-base-300 border"
      aria-label="Show TOC"
    >
      <div class="i-mingcute:list-check-fill"></div>
    </button>
  </div>
</div>

<script>
  document.addEventListener("scroll", () => {
    if (window.scrollY > 100) {
      document.body.classList.add("is-scrolled");
    } else {
      document.body.classList.remove("is-scrolled");
    }
  });
  document.addEventListener("click", (ev) => {
    if (!document.body.classList.contains("show-toc")) return;
    let elem = ev.target as HTMLElement | null;
    while (elem != null) {
      if (elem.classList.contains("float-buttons")) {
        return;
      }
      if (elem.classList.contains("sidebar__inner-container")) {
        return;
      }
      elem = elem.parentElement;
    }
    document.body.classList.remove("show-toc");
    document.body.classList.add("removing-toc");
    setTimeout(() => {
      document.body.classList.remove("removing-toc");
    }, 280);
    ev.stopPropagation();
  });
</script>
