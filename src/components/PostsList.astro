---
import type { CollectionEntry } from "astro:content";
import PostCard from "./PostCard.astro";
import type { HTMLAttributes } from "astro/types";

type Props = {
  posts: CollectionEntry<"blog">[];
  sort?: boolean;
} & HTMLAttributes<"div">;

const { posts, sort = false, class: className = "", ...props } = Astro.props;

const sortedPosts = sort
  ? posts.sort((a, b) => {
      return b.data.date.getTime() - a.data.date.getTime();
    })
  : posts;
---

<div class={`posts-list flex flex-col ${className}`} {...props}>
  {
    sortedPosts.map((post) => (
      <PostCard post={post} class:list={[post.data.hidden ? "hidden" : ""]} />
    ))
  }
</div>
